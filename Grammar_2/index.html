<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Tracery</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="scripts/tracery.js"></script>
  </head>
  <body>
    <span id="img1"></span><span id="img2"></span>
    <button id="refresh">Next</button>
    <script>
      var grammar1, grammar2;
      var data=[];
      data[0] = {
        "hexDigit":["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F"],
        "digit":["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
        "colorHex":["#hexDigit##hexDigit##hexDigit##hexDigit##hexDigit##hexDigit#"],
        "shape":["rect width=\"#num#\" height=\"#num#\" x=\"#num#\" y=\"#num#\"", "circle cx=\"#num#\" cy=\"#num#\" r=\"#num#\"", "polygon points=\"#num#,#num# #num#,#num# #num#,#num#\""],
        "num":["#digit##digit#"],
        "stroke":["stroke=\"#colorHex.hexColour#\" stroke-width=\"#digit#\" stroke-opacity=\"0.#digit#\""],
        "fill":["fill=\"#colorHex.hexColour#\" fill-opacity=\"0.#digit#\""],
        "makeShape":["<#shape# #stroke# #fill# />"],
        "bg":["<rect width='300' height='300' x='-50' y='-50' fill='#colorHex.hexColour#' />"],

        "origin":["<svg width=\"200\" height=\"200\">#bg##makeShape##makeShape##makeShape##makeShape##makeShape##makeShape##makeShape#</svg>"]
      };

      data[1] = {
        "hexDigit":["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F"],
        "digit":["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
        "colorHex":["#hexDigit##hexDigit##hexDigit##hexDigit##hexDigit##hexDigit#"],
        "shape":["rect width=\"#num#\" height=\"#num#\" x=\"#num#\" y=\"#num#\"", "polygon points=\"#num#,#num# #num#,#num# #num#,#num#\"", "polygon points=\"#num#,#num# #num#,#num# #num#,#num#,#num#,#num#\""],
        "num":["#digit##digit#"],
        "stroke":["stroke='#colorHex.hexColour#' stroke-width=\"#digit#\" stroke-opacity=\"0.#digit#\""],
        "fill":["fill=\"#colorHex.hexColour#\" fill-opacity=\"0.#digit#\""],
        "makeShape":["<#shape# #stroke# #fill# />"],
        "bg":["<rect width='300' height='300' x='-50' y='-50' fill=\"#colorHex.hexColour#\" />"],
        "origin":["<svg width=\"200\" height=\"200\">#bg##makeShape##makeShape##makeShape##makeShape##makeShape##makeShape##makeShape#</svg>"]
      };

//replace(/(?:^|\s)\S/g
      grammar1 = tracery.createGrammar(data[0]);
      grammar2 = tracery.createGrammar(data[1]);
      img1 = grammar1.flatten('#origin#');
      document.getElementById("img1").innerHTML = img1;
      img2 = grammar2.flatten('#origin#');
      document.getElementById("img2").innerHTML = img2;
      document.getElementById("refresh").addEventListener("click", newImage);

      function newImage(){
        console.log("click!");
        img1 = grammar1.flatten('#origin#');
        img2 = grammar2.flatten('#origin#');
        document.getElementById("img1").innerHTML = img1;
        document.getElementById("img2").innerHTML = img2;

      }
    </script>
    <div>Made with <a href="http://tracery.io/">Tracery</a> by <a href="http://www.galaxykate.com/">GalaxyKate</a>
  </body>
</html>
